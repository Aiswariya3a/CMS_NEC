
{% extends "dashboard.html" %}

{% block title %}Schedule New Session{% endblock %}

{% block content %}
<section>
    <a href="/attendance" class="btn-secondary">&lt; Back to Dashboard</a>
    <h1>Attendance Report</h1>
    <hr>

    <!-- Dropdown to Select Session -->
    <form action="/attendance-report" method="get">
        <select id="session_dropdown" name="session_id" required>
            <option value="" disabled selected>Select a session</option>
            {% for session in sessions %}
                <option value="{{ session.id }}">
                    {{ session.name }} - {{ session.date.strftime('%Y-%m-%d') }}
                </option>
            {% endfor %}
        </select>
        <button type="submit" >View Attendance</button>
    </form>
    <hr>

    <!-- Display Attendance Data -->
    {% if selected_session %}
        <h2>Session: {{ selected_session.name }} ({{ selected_session.date.strftime('%Y-%m-%d') }})</h2>
        <table border="1">
            <thead>
                <tr>
                    <th>Student Name</th>
                    <th>Attendance</th>
                </tr>
            </thead>
            <tbody>
                {% for record in attendance_records %}
                    <tr>
                        <td>{{ record.student_name }}</td>
                        <td>{{ "Present" if record.present else "Absent" }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
</section>
{% endblock %}
